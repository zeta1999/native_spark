<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded "><a href="chapter_1.html"><strong aria-hidden="true">1.</strong> Introduction</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title"></h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<p><code>native_spark</code> is a distributed computing framework inspired by Apache Spark.</p>
<h2><a class="header" href="#getting-started" id="getting-started">Getting started</a></h2>
<h3><a class="header" href="#installation" id="installation">Installation</a></h3>
<p>Right now the framework lacks any sort of cluster manager of submit program/script.</p>
<p>In order to use the framework you have to clone the repository and add the local dependency or add the upstream GitHub repository to your Rust project (the crate is not yet published on <a href="https://crates.io/">crates.io</a>). E.g. add to your application Cargo.toml or:</p>
<pre><code class="language-doc">[dependencies]
native_spark = { path = &quot;/path/to/local/git/repo&quot; }
# or
native_spark = { git = &quot;https://github.com/rajasekarv/native_spark&quot;, branch = &quot;master }
</code></pre>
<p>Is not recommended to use the application for any sort of production code yet as it's under heavy development.</p>
<p>Check <a href="https://github.com/rajasekarv/native_spark/tree/master/examples">examples</a> and <a href="https://github.com/rajasekarv/native_spark/tree/master/tests">tests</a> in the source code to get a basic idea of how the framework works.</p>
<h2><a class="header" href="#executing-an-application" id="executing-an-application">Executing an application</a></h2>
<p>In order to execute application code some preliminary setup is required. (So far only tested on Linux.)</p>
<ul>
<li>Install <a href="https://capnproto.org/install.html">Cap'n Proto</a>. Required for serialization/deserialziation and IPC between executors.</li>
<li>If you want to execute examples, tests or contribute to development, clone the repository <code>git clone https://github.com/rajasekarv/native_spark/</code>, if you want to use the library in your own application you can just add the depency as indicated in the installation paragraph.</li>
<li>You need to have <a href="https://github.com/rajasekarv/native_spark/blob/master/config_files/hosts.conf">hosts.conf</a> in the format present inside config folder in the home directory of the user deploying executors in any of the machines.
<ul>
<li>In <code>local</code> mode this means in your current user home, e.g.:</li>
</ul>
<blockquote>
<p>$ cp native_spark/config_files/hosts.conf $HOME</p>
</blockquote>
<ul>
<li>In <code>distributed</code> mode the same file is required in each host that may be deploying executors (the ones indicated in the <code>hosts.conf</code> file) and the master. E.g.:</li>
</ul>
<pre><code class="language-doc">$ ssh remote_user@172.0.0.10 # this machine IP is in hosts.conf
# create the same hosts.conf file in every machine:
$ cd ~ &amp;&amp; vim hosts.conf ...
</code></pre>
</li>
<li>The environment variable <code>NS_LOCAL_IP</code> must be set for the user executing application code.
<ul>
<li>In <code>local</code> it suffices to set up for the current user:</li>
</ul>
<blockquote>
<p>$ export NS_LOCAL_IP=0.0.0.0</p>
</blockquote>
<ul>
<li>In <code>distributed</code> the variable is required, aditionally, to be set up for the users remotely connecting. Depending on the O.S. and ssh defaults this may require some additional configuration. E.g.:</li>
</ul>
<pre><code class="language-doc">$ ssh remote_user@172.0.0.10
$ sudo echo &quot;NS_LOCAL_IP=172.0.0.10&quot; &gt;&gt; .ssh/environment
$ sudo echo &quot;PermitUserEnvironment yes&quot; &gt;&gt; /etc/ssh/sshd_config
$ service ssh restart 
</code></pre>
</li>
</ul>
<p>Now you are ready to execute your application code; if you want to try the provided 
examples just run them. In <code>local</code>:</p>
<blockquote>
<p>cargo run --example make_rdd</p>
</blockquote>
<p>In <code>distributed</code>:</p>
<blockquote>
<p>cargo run --example make_rdd -d distributed</p>
</blockquote>
<h2><a class="header" href="#deploying-with-docker" id="deploying-with-docker">Deploying with Docker</a></h2>
<p>There is a docker image and docker-compose script in order to ease up trying testing 
and deploying distributed mode on your local host. In order to use them:</p>
<ol>
<li>Build the examples image under the repository <code>docker</code> directory:</li>
</ol>
<blockquote>
<p>bash docker/build_image.sh</p>
</blockquote>
<ol start="2">
<li>When done, you can deploy a testing cluster:</li>
</ol>
<blockquote>
<p>bash testing_cluster.sh</p>
</blockquote>
<p>This will execute all the necessary steeps to to deploy a working network of containers where you can execute the tests. When finished you can attach a shell to the master and run the examples:</p>
<pre><code class="language-doc">$ docker exec -it docker_ns_master_1 bash
$ ./make_rdd -d distributed
</code></pre>
<h2><a class="header" href="#setting-execution-mode" id="setting-execution-mode">Setting execution mode</a></h2>
<p>In your application you can set the execution mode (<code>local</code> or <code>distributed</code>) in one of the following ways:</p>
<ol>
<li>Set it explicitly while creating the context, e.g.:</li>
</ol>
<pre><code class="language-doc">    use native_spark::DeploymentMode;

    let context = Context::with_mode(DeploymentMode::Local)?;
</code></pre>
<ol start="2">
<li>Execute the application with the <code>deployment mode</code> argument set to one of the valid modes (e.g.: <code>./my_app -d distributed</code>)</li>
<li>Set the DEPLOYMENT_MODE environment variable (e.g.: <code>DEPLOYMENT_MODE=local</code></li>
</ol>
<h3><a class="header" href="#additional-notes" id="additional-notes">Additional notes</a></h3>
<p>Since File readers are not done, you have to use manual file reading for now (like manually reading from S3 or hack around local files by distributing copies of all files to all machines and make rdd using filename list).</p>
<p>Ctrl-C and panic handling are not done yet, so if there is some problem during runtime, executors won't shut down automatically and you will have to manually kill the processes.</p>
<p>One of the limitations of current implementation is that the input and return types of all closures and all input to make_rdd should be owned data.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
